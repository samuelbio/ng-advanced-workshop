{"ast":null,"code":"import { of, Subject } from 'rxjs';\nimport { switchMap } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./country.service\";\nimport * as i2 from \"./autofilter-dropdown/autofilter-dropdown.component\";\nimport * as i3 from \"@angular/common\";\nexport class Solution5Component {\n  constructor(service) {\n    this.service = service;\n    this.currentCountry$ = new Subject();\n    this.statesForCountry$ = of([]);\n    this.countries$ = this.service.getCountries();\n    this.statesForCountry$ = this.currentCountry$.asObservable().pipe(switchMap(cntry => this.service.getStatesFor(cntry.id)));\n  }\n  updateStates(country) {\n    this.country = country;\n    this.state = null;\n    this.currentCountry$.next(country);\n  }\n}\nSolution5Component.ɵfac = function Solution5Component_Factory(t) {\n  return new (t || Solution5Component)(i0.ɵɵdirectiveInject(i1.CountryService));\n};\nSolution5Component.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: Solution5Component,\n  selectors: [[\"app-solution5\"]],\n  decls: 17,\n  vars: 9,\n  consts: [[\"placeholder\", \"Enter your country\", 3, \"entries$\", \"selectionChange\"], [\"placeholder\", \"Enter your state\", 3, \"entries$\", \"selection\", \"selectionChange\"]],\n  template: function Solution5Component_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"h2\");\n      i0.ɵɵtext(1, \"Solution 5\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(2, \"h2\");\n      i0.ɵɵtext(3, \"Result\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"div\")(5, \"app-autofilter-dropdown\", 0);\n      i0.ɵɵlistener(\"selectionChange\", function Solution5Component_Template_app_autofilter_dropdown_selectionChange_5_listener($event) {\n        return ctx.updateStates($event);\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(6, \"div\")(7, \"app-autofilter-dropdown\", 1);\n      i0.ɵɵlistener(\"selectionChange\", function Solution5Component_Template_app_autofilter_dropdown_selectionChange_7_listener($event) {\n        return ctx.state = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelement(8, \"hr\");\n      i0.ɵɵelementStart(9, \"div\");\n      i0.ɵɵtext(10, \" Current selection\");\n      i0.ɵɵelement(11, \"br\");\n      i0.ɵɵtext(12);\n      i0.ɵɵpipe(13, \"json\");\n      i0.ɵɵelement(14, \"br\");\n      i0.ɵɵtext(15);\n      i0.ɵɵpipe(16, \"json\");\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"entries$\", ctx.countries$);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"entries$\", ctx.statesForCountry$)(\"selection\", ctx.state);\n      i0.ɵɵadvance(5);\n      i0.ɵɵtextInterpolate1(\" CountryModel: \", i0.ɵɵpipeBind1(13, 5, ctx.country), \" \");\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate1(\" State: \", i0.ɵɵpipeBind1(16, 7, ctx.state), \"\\n\");\n    }\n  },\n  dependencies: [i2.AutofilterDropdownComponent, i3.JsonPipe],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"AACA,SAAoBA,EAAE,EAAEC,OAAO,QAAO,MAAM;AAG5C,SAAQC,SAAS,QAAO,gBAAgB;;;;;AAOxC,OAAM,MAAOC,kBAAkB;EAQ7BC,YAAoBC,OAAuB;IAAvB,YAAO,GAAPA,OAAO;IAL3B,oBAAe,GAAG,IAAIJ,OAAO,EAAW;IACxC,sBAAiB,GAAyBD,EAAE,CAAC,EAAE,CAAC;IAK9C,IAAI,CAACM,UAAU,GAAG,IAAI,CAACD,OAAO,CAACE,YAAY,EAAE;IAC7C,IAAI,CAACC,iBAAiB,GAAG,IAAI,CAACC,eAAe,CAACC,YAAY,EAAE,CAACC,IAAI,CAC/DT,SAAS,CAACU,KAAK,IAAI,IAAI,CAACP,OAAO,CAACQ,YAAY,CAACD,KAAK,CAACE,EAAE,CAAC,CAAC,CACxD;EACH;EAEAC,YAAY,CAACC,OAAgB;IAC3B,IAAI,CAACA,OAAO,GAAGA,OAAO;IACtB,IAAI,CAACC,KAAK,GAAG,IAAI;IACjB,IAAI,CAACR,eAAe,CAACS,IAAI,CAACF,OAAO,CAAC;EACpC;;AAnBWb,kBAAkB;mBAAlBA,kBAAkB;AAAA;AAAlBA,kBAAkB;QAAlBA,kBAAkB;EAAAgB;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCX/BC,0BAAI;MAAAA,0BAAU;MAAAA,iBAAK;MACnBA,0BAAI;MAAAA,sBAAM;MAAAA,iBAAK;MACfA,2BAAM;MAC6CA;QAAA,OAAmBC,wBAAoB;MAAA,EAAC;MAEzFD,iBAA0B;MAE5BA,2BAAM;MACoDA;QAAA;MAAA,EAAqB;MAE7EA,iBAA0B;MAE5BA,qBAAI;MACJA,2BAAK;MACHA,mCAAiB;MAAAA,sBAAI;MACrBA,aAAiC;;MAAAA,sBAAI;MACrCA,aACF;;MAAAA,iBAAM;;;MAdqBA,eAAuB;MAAvBA,yCAAuB;MAKvBA,eAA8B;MAA9BA,gDAA8B;MAOvDA,eAAiC;MAAjCA,iFAAiC;MACjCA,eACF;MADEA,yEACF","names":["of","Subject","switchMap","Solution5Component","constructor","service","countries$","getCountries","statesForCountry$","currentCountry$","asObservable","pipe","cntry","getStatesFor","id","updateStates","country","state","next","selectors","decls","vars","consts","template","i0","ctx"],"sourceRoot":"","sources":["/Users/macbook/Documents/PROJETS/angular-certification/ng-advanced-workshop/src/app/solution/solution5/solution5.component.ts","/Users/macbook/Documents/PROJETS/angular-certification/ng-advanced-workshop/src/app/solution/solution5/solution5.component.html"],"sourcesContent":["import { Component } from '@angular/core';\nimport {Observable, of, Subject} from 'rxjs';\nimport {Country, State} from './types';\nimport {CountryService} from './country.service';\nimport {switchMap} from 'rxjs/operators';\n\n@Component({\n  selector: 'app-solution5',\n  templateUrl: './solution5.component.html',\n  styleUrls: ['./solution5.component.css']\n})\nexport class Solution5Component {\n\n  countries$: Observable<Country[]>;\n  currentCountry$ = new Subject<Country>();\n  statesForCountry$: Observable<State[]> =  of([]);\n  country: Country;\n  state: State;\n\n  constructor(private service: CountryService) {\n    this.countries$ = this.service.getCountries();\n    this.statesForCountry$ = this.currentCountry$.asObservable().pipe(\n      switchMap(cntry => this.service.getStatesFor(cntry.id))\n    );\n  }\n\n  updateStates(country: Country) {\n    this.country = country;\n    this.state = null;\n    this.currentCountry$.next(country);\n  }\n\n}\n","<h2>Solution 5</h2>\n<h2>Result</h2>\n<div >\n  <app-autofilter-dropdown [entries$]=\"countries$\" (selectionChange)=\"updateStates($event)\"\n                           placeholder=\"Enter your country\">\n  </app-autofilter-dropdown>\n</div>\n<div >\n  <app-autofilter-dropdown [entries$]=\"statesForCountry$\" [(selection)]=\"state\"\n                           placeholder=\"Enter your state\">\n  </app-autofilter-dropdown>\n</div>\n<hr>\n<div>\n  Current selection<br>\n  CountryModel: {{country | json}} <br>\n  State: {{state | json}}\n</div>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}